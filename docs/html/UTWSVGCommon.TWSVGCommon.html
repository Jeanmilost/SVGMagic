<!DOCTYPE html>
<html lang="en">
<head>
<title>SVG Magic: UTWSVGCommon: Class TWSVGCommon</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="PasDoc 0.16.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rel="StyleSheet" type="text/css" href="pasdoc.css">
</head>
<body>
<div class="container"><div class="navigation">
<h2><a href="index.html">SVG Magic</a></h2><ul><li><a href="AllUnits.html">Units</a></li><li><a href="ClassHierarchy.html">Class Hierarchy</a></li><li><a href="AllClasses.html">Classes, Interfaces, Objects and Records</a></li><li><a href="AllTypes.html">Types</a></li><li><a href="AllVariables.html">Variables</a></li><li><a href="AllConstants.html">Constants</a></li><li><a href="AllFunctions.html">Functions and Procedures</a></li><li><a href="AllIdentifiers.html">Identifiers</a></li></ul></div><div class="content">
<span id="TWSVGCommon"></span><h1 class="cio">Class TWSVGCommon</h1>
<div class="sections">
<div class="one_section"><a class="section" href="#PasDoc-Description">Description</a></div><div class="one_section"><a class="section" href="#PasDoc-Hierarchy">Hierarchy</a></div><div class="one_section"><a class="section" href="#PasDoc-NestedTypes">Nested Types</a></div><div class="one_section"><a class="section" href="#PasDoc-Fields">Fields</a></div><div class="one_section"><a class="section" href="#PasDoc-Methods">Methods</a></div><div class="one_section">Properties</div></div>
<span id="PasDoc-Description"></span><h2 class="unit">Unit</h2>
<p class="unitlink">
<a href="UTWSVGCommon.html">UTWSVGCommon</a></p>
<h2 class="declaration">Declaration</h2>
<p class="declaration">
<code>type TWSVGCommon = class(TObject)</code></p>
<h2 class="description">Description</h2>
<p>
Scalable Vector Graphics (SVG) common functions and algorithms</p>
<span id="PasDoc-Hierarchy"></span><h2 class="hierarchy">Hierarchy</h2>
<ul class="hierarchy"><li class="ancestor">TObject</li>
<li class="thisitem">TWSVGCommon</li></ul><h2 class="overview">Overview</h2>
<span id="PasDoc-NestedTypes"></span><h3 class="summary">Nested Types</h3>
<table class="summary wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="published.gif" alt="Published" title="Published"></a></td>
<td class="itemcode"><code><strong><a href="UTWSVGCommon.TWSVGCommon.html#IEValueType">IEValueType</a></strong> = (...);</code></td>
</tr>
<tr class="list2">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code><strong><a href="UTWSVGCommon.TWSVGCommon.html#IValues">IValues</a></strong> = TStringList;</code></td>
</tr>
</table>
<span id="PasDoc-Fields"></span><h3 class="summary">Fields</h3>
<table class="summary wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>nested const <strong><a href="UTWSVGCommon.TWSVGCommon.html#m_Separators">m_Separators</a></strong>: UnicodeString = ' ,;:'#13#10#09;</code></td>
</tr>
</table>
<span id="PasDoc-Methods"></span><h3 class="summary">Methods</h3>
<table class="summary wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#DetectSeparator">DetectSeparator</a></strong>(const str: UnicodeString; start, len: NativeInt): WideChar; static;</code></td>
</tr>
<tr class="list2">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#DoIgnoreLastValue">DoIgnoreLastValue</a></strong>(const data: UnicodeString; start, len: NativeInt; out lastValuePos: NativeInt): Boolean; static;</code></td>
</tr>
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#ExtractValues">ExtractValues</a></strong>&lt;T&gt;(const data: UnicodeString; var values: <a href="UTWSVGCommon.html#TWSVGArray">TWSVGArray</a>&lt;T&gt;): Boolean; overload; static;</code></td>
</tr>
<tr class="list2">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#ExtractValues">ExtractValues</a></strong>&lt;T&gt;(const data: UnicodeString; start, len: NativeInt; var values: <a href="UTWSVGCommon.html#TWSVGArray">TWSVGArray</a>&lt;T&gt;): Boolean; overload; static;</code></td>
</tr>
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#ExtractValues">ExtractValues</a></strong>(const data: UnicodeString; start, len: NativeInt; pValues: <a href="UTWSVGCommon.TWSVGCommon.html#IValues">IValues</a>; doTrim: Boolean): NativeUInt; overload; static;</code></td>
</tr>
<tr class="list2">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#ExtractValues_Unoptimized">ExtractValues_Unoptimized</a></strong>(const data: UnicodeString; const separator: WideChar; var values: <a href="UTWSVGCommon.html#TWSVGArray_Unoptimized">TWSVGArray_Unoptimized</a>): Boolean; overload; static;</code></td>
</tr>
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#ExtractValues_Unoptimized">ExtractValues_Unoptimized</a></strong>(const data: UnicodeString; pValues: <a href="UTWSVGCommon.TWSVGCommon.html#IValues">IValues</a>; doTrim: Boolean): NativeUInt; overload; static;</code></td>
</tr>
<tr class="list2">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#GetAttribute">GetAttribute</a></strong>(const pNode: IXMLNode; const name, defVal: UnicodeString): UnicodeString; static;</code></td>
</tr>
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#GetType">GetType</a></strong>(name: UnicodeString): <a href="UTWSVGCommon.TWSVGCommon.html#IEValueType">IEValueType</a>; static;</code></td>
</tr>
<tr class="list2">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#GetValue">GetValue</a></strong>(const pNode: IXMLNode): UnicodeString; static;</code></td>
</tr>
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><code>class function <strong><a href="UTWSVGCommon.TWSVGCommon.html#PrepareStr">PrepareStr</a></strong>(const str: UnicodeString): UnicodeString; static;</code></td>
</tr>
</table>
<h2 class="description">Description</h2>
<h3 class="detail">Nested Types</h3>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="published.gif" alt="Published" title="Published"></a></td>
<td class="itemcode"><span id="IEValueType"></span><code><strong>IEValueType</strong> = (...);</code></td>
</tr>
<tr><td colspan="2">
<p>
Value type enumeration         </p>
<h6 class="description_section">Values</h6>
<ul>
<li>
<span id="IE_VT_Unknown">IE_VT_Unknown</span>: Unknown value type</li>
<li>
<span id="IE_VT_Value">IE_VT_Value</span>: A value or list that contains real numbers</li>
<li>
<span id="IE_VT_Color">IE_VT_Color</span>: A value or list that contains colors</li>
<li>
<span id="IE_VT_Rect">IE_VT_Rect</span>: A value or list that contains rectangles (x, y, width, height)</li>
<li>
<span id="IE_VT_Matrix">IE_VT_Matrix</span>: A value or list that contains matrices</li>
<li>
<span id="IE_VT_Text">IE_VT_Text</span>: A value or list that contains texts</li>
<li>
<span id="IE_VT_Version">IE_VT_Version</span>: A value or list that contains version numbers</li>
<li>
<span id="IE_VT_Enum">IE_VT_Enum</span>: A value or list based on an enumerator (the exact type depends of the context)</li>
<li>
<span id="IE_VT_Mixed">IE_VT_Mixed</span>: A value or list that contains several type of values (e.g. the enable-background property)</li>
</ul>
</td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="IValues"></span><code><strong>IValues</strong> = TStringList;</code></td>
</tr>
<tr><td colspan="2">
&nbsp;</td></tr>
</table>
<h3 class="detail">Fields</h3>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="m_Separators"></span><code>nested const <strong>m_Separators</strong>: UnicodeString = ' ,;:'#13#10#09;</code></td>
</tr>
<tr><td colspan="2">
&nbsp;</td></tr>
</table>
<h3 class="detail">Methods</h3>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="DetectSeparator"></span><code>class function <strong>DetectSeparator</strong>(const str: UnicodeString; start, len: NativeInt): WideChar; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Detect the separator used in a value list    </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>str</dt>
<dd>String containing the values for which the separator should be detected</dd>
<dt>start</dt>
<dd>Start pos in string from which the search will begin, in chars</dd>
<dt>len</dt>
<dd>Search length in chars</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return">detected separator, '\0' if no separator</p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="DoIgnoreLastValue"></span><code>class function <strong>DoIgnoreLastValue</strong>(const data: UnicodeString; start, len: NativeInt; out lastValuePos: NativeInt): Boolean; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Check if the last value of a list should be ignored because empty      <br> <strong>NOTE</strong> This function is required to check if the last item in a list is really a value, because several list may be terminated with a semicolon, like e.g: values=&quot;inline;inline;none;inline;&quot; In this case, there is no more value after the semicolon, but the SVG parser believes that an empty value exists after the semicolon, and wrongly process it</p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>data</dt>
<dd>List data to check</dd>
<dt>start</dt>
<dd>Start position where data will begin to be read in the string</dd>
<dt>len</dt>
<dd>Data length to read in the string</dd>
<dt>lastValuePos</dt>
<dd>The last valid position in the string, on the last value end, in chars</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return"><code>True</code> if last value should be ignored, otherwise <code>False</code></p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="ExtractValues"></span><code>class function <strong>ExtractValues</strong>&lt;T&gt;(const data: UnicodeString; var values: <a href="UTWSVGCommon.html#TWSVGArray">TWSVGArray</a>&lt;T&gt;): Boolean; overload; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Extract numeric values from a value list (e.g. keyTimes=&quot;0;0.33;0.66;1&quot;)   </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>data</dt>
<dd>Source SVG value list</dd>
<dt>values</dt>
<dd><strong>[out]</strong> List of converted values</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return"><code>True</code> on success, otherwise <code>False</code></p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="ExtractValues"></span><code>class function <strong>ExtractValues</strong>&lt;T&gt;(const data: UnicodeString; start, len: NativeInt; var values: <a href="UTWSVGCommon.html#TWSVGArray">TWSVGArray</a>&lt;T&gt;): Boolean; overload; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Extract numeric values from a value list (e.g. keyTimes=&quot;0;0.33;0.66;1&quot;)     </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>data</dt>
<dd>Source SVG value list</dd>
<dt>start</dt>
<dd>Start position where data will begin to be read in the string</dd>
<dt>len</dt>
<dd>Data length to read in the string</dd>
<dt>values</dt>
<dd><strong>[out]</strong> List of converted values</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return"><code>True</code> on success, otherwise <code>False</code></p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="ExtractValues"></span><code>class function <strong>ExtractValues</strong>(const data: UnicodeString; start, len: NativeInt; pValues: <a href="UTWSVGCommon.TWSVGCommon.html#IValues">IValues</a>; doTrim: Boolean): NativeUInt; overload; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Extract values from a value list (e.g. keyTimes=&quot;0;0.33;0.66;1&quot; or values=&quot;none;inline;none;none&quot;)      </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>data</dt>
<dd>Data containing values to extract</dd>
<dt>start</dt>
<dd>Start position where data will begin to be read in the string</dd>
<dt>len</dt>
<dd>Data length to read in the string</dd>
<dt>pValues</dt>
<dd>Extracted values</dd>
<dt>doTrim</dt>
<dd>If <code>True</code>, extracted values will be trimmed</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return">Number of extracted values</p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="ExtractValues_Unoptimized"></span><code>class function <strong>ExtractValues_Unoptimized</strong>(const data: UnicodeString; const separator: WideChar; var values: <a href="UTWSVGCommon.html#TWSVGArray_Unoptimized">TWSVGArray_Unoptimized</a>): Boolean; overload; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Extract numeric values from a value list (e.g. keyTimes=&quot;0;0.33;0.66;1&quot;)     <br> <strong>NOTE</strong> In this overload, the code clarity is favored on the execution speed. The reason why this function was kept is that it can be used as strongly tested alternative in case an unknown bug happen in the function used in production</p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>data</dt>
<dd>Source SVG value list</dd>
<dt>separator</dt>
<dd>Separator used in the current SVG</dd>
<dt>values</dt>
<dd><strong>[out]</strong> List of converted values</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return"><code>True</code> on success, otherwise <code>False</code></p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="ExtractValues_Unoptimized"></span><code>class function <strong>ExtractValues_Unoptimized</strong>(const data: UnicodeString; pValues: <a href="UTWSVGCommon.TWSVGCommon.html#IValues">IValues</a>; doTrim: Boolean): NativeUInt; overload; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Extract values from a value list (e.g. keyTimes=&quot;0;0.33;0.66;1&quot; or values=&quot;none;inline;none;none&quot;)     <br> <strong>NOTE</strong> In this overload, the code clarity is favored on the execution speed. The reason why this function was kept is that it can be used as strongly tested alternative in case an unknown bug happen in the function used in production</p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>data</dt>
<dd>Data containing values to extract</dd>
<dt>pValues</dt>
<dd>Extracted values</dd>
<dt>doTrim</dt>
<dd>If <code>True</code>, extracted values will be trimmed</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return">Number of extracted values</p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="GetAttribute"></span><code>class function <strong>GetAttribute</strong>(const pNode: IXMLNode; const name, defVal: UnicodeString): UnicodeString; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Get a SVG attribute    </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>pNode</dt>
<dd>Xml node containing the attribute to get</dd>
<dt>name</dt>
<dd>Attribute name to get</dd>
<dt>defVal</dt>
<dd>Default value to return in case the SVG attribute doesn't exist</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return">attribute content, default value if attribute doesnt'exist</p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="GetType"></span><code>class function <strong>GetType</strong>(name: UnicodeString): <a href="UTWSVGCommon.TWSVGCommon.html#IEValueType">IEValueType</a>; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Get the value type associated with a property  </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>name</dt>
<dd>Property name</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return">Value type</p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="GetValue"></span><code>class function <strong>GetValue</strong>(const pNode: IXMLNode): UnicodeString; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Get a SVG value  </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>pNode</dt>
<dd>Xml node containing the value to get</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return">value, empty string if node contains no value or on error</p></td></tr>
</table>
<table class="detail wide_list">
<tr class="list">
<td class="visibility"><a href="legend.html"><img  src="public.gif" alt="Public" title="Public"></a></td>
<td class="itemcode"><span id="PrepareStr"></span><code>class function <strong>PrepareStr</strong>(const str: UnicodeString): UnicodeString; static;</code></td>
</tr>
<tr><td colspan="2">
<p>
Prepare a string to be parsed (i.e. trim it and remove all CRLF and Tab chars)  </p>
<h6 class="description_section">Parameters</h6>
<dl class="parameters">
<dt>str</dt>
<dd>String to prepare</dd>
</dl>
<h6 class="description_section">Returns</h6>
<p class="return">Prepared string</p></td></tr>
</table>
<hr><span class="appinfo"><em>Generated by <a href="https://pasdoc.github.io/">PasDoc 0.16.0</a>. </em>
</span>
</div></div></body></html>
